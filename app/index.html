<!DOCTYPE html>
<html lang="en" ng-app="propCrossApp">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
  <title>Angular</title>
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="app.css">
  <script src="bower_components/angular/angular.min.js"></script>
  <script src="bower_components/angular-resource/angular-resource.min.js"></script>
  <script src="app.js"></script>
</head>
<body>
  <header class="header container">
    <h1 class="text-center">Property Cross</h1>
  </header>
  <main class="main"
       ng-controller="SearchData">
    <header>
      <div class="container">
        <br>
        <p>Use the form below to search for houses to buy. You can search by place-name, postcode, or click 'My location', to search in your current location</p>
        <hr>
        <div class="row">
          <div class="col-xs-6">

            <!-- Search form -->
            <form action="#" method="GET" role="form">
              <div class="form-group row">
                <div class="col-xs-6">
                  <!-- @TODO: Make as country object -->
                  <select name="country">
                    <option value="UK" selected="selected">UK</option>
                    <option value="Australia">Australia</option>
                    <option value="Brasil">Brasil</option>
                    <option value="Deutschland">Deutschland</option>
                    <option value="España">España</option>
                    <option value="France">France</option>
                    <option value="India">India</option>
                    <option value="Italia">Italia</option>
                    <option value="Mexico">Mexico</option>
                  </select>
                </div>
                <div class="col-xs-6">
                  <input type="text" class="form-control" placeholder="Property"
                    ng-model="place">
                </div>
              </div>
              <div class="form-group">
                  <button type="submit" class="btn btn-warning"
                      ng-click="getLocationData(place)">Go</button>
                  <button type="button" class="btn btn-default"
                      ng-click="getLocationData('Oxford')">My location</button>
              </div>
            </form>
            
            <!-- Alert box -->
            <div class="bg-danger"
                ng-show="searchError">There are was a problem with your search.
            </div>

            <!-- Result search area -->
            <div class="panel panel-default"
                 ng-hide="boolStatusCode">
              <div class="panel-body">
                <ul>
                  <li 
                    ng-repeat="location in locations">
                      <a href="#" ng-click="showResult()">{{ location.title }} ({{ totalResults }})</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
    <section class="container">
      <!-- Result list -->
      <div class="panel panel-default"
          ng-show="bollShowResult">
        <div class="panel-body">
          <!-- Pagination -->
          <nav>
            <ul class="pagination">
              <li 
                  ng-if="+data.response.page !== 1"
                  ng-click="getLocationData(place, +data.response.page - 1)">
                    <a href="#" aria-label="Previous">
                      <span aria-hidden="true">&laquo;</span>
                    </a>
              </li>
              <li
                  ng-repeat="start in getTimes(stepPages) track by $index">
                    <a href="#" ng-click="getLocationData(place, +data.response.page + $index)">{{ +data.response.page + $index }}</a>
              </li>
              <li>
                <a href="#" disabled="disabled">&hellip;</a>
              </li>
              <li
                  ng-repeat="end in getTimes(stepPages) track by $index">
                    <a href="#" 
                        ng-click="getLocationData(place, data.response.total_pages - stepPages + $index + 1)">
                        {{ data.response.total_pages - stepPages + $index + 1 }}
                    </a>
              </li>
              <li 
                  ng-if="+data.response.page !== data.response.total_pages">
                    <a href="#" aria-label="Next"
                        ng-click="getLocationData(place, +data.response.page + 1)">
                      <span aria-hidden="true">&raquo;</span>
                    </a>
              </li>
            </ul>
          </nav>

          <!-- Property list -->
          <ul class="property-list">
            <li class="row"
                ng-repeat="property in listings">
                <div class="col-xs-4">
                  <img ng-src="{{ property.img_url }}" alt="">
                </div>
                <div class="col-xs-8">
                  <h3><a href="{{ property.lister_url }}" target="_blank">{{ property.lister_name }}</a></h3>
                  <p>
                    <a href="{{ property.lister_url }}" class="btn btn-primary">{{ property.price | currency}}</a>
                  </p>
                  <p>
                    <span class="label label-default">{{ property.bedroom_number }} Bed<span ng-if="property.bedroom_number > 1">s</span></span>
                    &nbsp;
                    <span ng-if="property.property_type !== ''">
                      <span class="label label-default">{{ property.property_type }}</span>
                      &nbsp;
                    </span>
                    <span ng-if="property.property_keyworlds !== ''">
                      <span class="label label-default">{{ property.keywords }}</span>
                      &nbsp;
                    </span>
                  </p>
                  <p>{{ property.summary }}</p>
                </div>
            </li>
          </ul>
        </div>
      </div>
    </section>
  </main>
</body>
</html>